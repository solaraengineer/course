<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="{% static 'dash.css' %}">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-brand">MyApp</a>
            <ul class="nav-links">
                <li><a href="/dash">Dashboard</a></li>
                <li><a href="/profile">Profile</a></li>
                <li><a href="/settings">Settings</a></li>
                <li><a href="/Sub">Subscriptions</a></li>
            </ul>
            <div class="nav-user">
                <div class="nav-avatar">JD</div>
                <span>{{ user.username }}</span>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="main-content">
        <!-- Messages -->
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Welcome Header -->
        <div class="welcome-header">
            <h1>Welcome back, <span class="highlight">{{ user.username }}</span>! ðŸ‘‹</h1>
            <p>Here's what's happening with your account today.</p>
        </div>

        <!-- Stats Grid -->
        <div class="info-grid">
            <div class="info-card">
                <div class="info-icon">ðŸ‘¤</div>
                <div class="info-label">Username</div>
                <div class="info-value">{{ user.username }}</div>
            </div>

            <div class="info-card">
                <div class="info-icon">ðŸ“§</div>
                <div class="info-label">Email</div>
                <div class="info-value">{{ user.email }}</div>
            </div>

            <div class="info-card">
                <div class="info-icon">ðŸ“…</div>
                <div class="info-label">Member Since</div>
                <div class="info-value">{{ user.date_joined|date:"M d, Y" }}</div>
            </div>

            <div class="info-card">
                <div class="info-icon">ðŸ”‘</div>
                <div class="info-label">Account Status</div>
                <div class="info-value status-active">{{ user.is_active|yesno:"Active,Inactive" }}</div>
            </div>
        </div>

        <!-- Account Type Card -->
        <div class="info-type">
            <div class="info-card account-type-card">
                <div class="info-icon">ðŸ’³</div>
                <div class="info-label">Current Plan</div>
                <div class="info-value">{{ user.account_type }}</div>
                <div class="upgrade-hint">Upgrade for more features â†’</div>
            </div>
        </div>

        <!-- Terms Button -->
        <div class="footer-actions">
            <a href="/terms" class="terms-button">
                <span class="terms-icon">ðŸ“œ</span>
                <span class="terms-text">Terms & Conditions</span>
                <span class="terms-arrow">â†’</span>
            </a>
        </div>
        </div>

        <!-- Pricing Sidebar -->
        <div class="pricing-sidebar">
            <div class="sidebar-header">
                <h3>Upgrade Plan</h3>
                <p>Choose your tier</p>
            </div>
            <ul class="pricing-links">
                <li><a href="/preview" class="tier-free">Free</a></li>
                <li><a href="/beginner" class="tier-beginner">Beginner</a></li>
                <li><a href="/inter" class="tier-intermediate">Intermediate</a></li>
                <li><a href="/adv" class="tier-advanced">Advanced</a></li>
                <li><a href="/sen" class="tier-senior">Senior</a></li>
            </ul>
        </div>
    </div>

    <script>
        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Auto-hide messages
        setTimeout(() => {
            const messages = document.querySelectorAll('.alert');
            messages.forEach(msg => {
                msg.style.transition = 'opacity 0.5s, transform 0.5s';
                msg.style.opacity = '0';
                msg.style.transform = 'translateY(-10px)';
                setTimeout(() => msg.remove(), 500);
            });
        }, 5000);

        // Dynamic avatar initials
        const username = "{{ user.username }}";
        if (username) {
            const initials = username.substring(0, 2).toUpperCase();
            document.querySelector('.nav-avatar').textContent = initials;
        }

        // Pricing sidebar animation on scroll
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const sidebar = document.querySelector('.pricing-sidebar');
            const currentScroll = window.pageYOffset;

            if (currentScroll > lastScroll) {
                sidebar.style.opacity = '0.7';
            } else {
                sidebar.style.opacity = '1';
            }
            lastScroll = currentScroll;
        });
    </script>
</body>
</html>